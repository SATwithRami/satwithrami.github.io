<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Academic Grade Calculator Pro</title>
  <link rel="stylesheet" href="style.css" />
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js" defer></script>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#4f46e5" />
  
  <script>
    // Simple loading screen removal
    window.addEventListener('load', function() {
      setTimeout(function() {
        const loading = document.getElementById('loading-screen');
        if (loading) {
          loading.style.opacity = '0';
          setTimeout(() => loading.style.display = 'none', 500);
        }
      }, 500);
    });
  </script>
</head>
<body>
  <!-- Loading Screen (Keep it simple) -->
  <div id="loading-screen" style="position:fixed;top:0;left:0;right:0;bottom:0;background:#667eea;display:flex;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.5s ease;">
    <div style="text-align:center;color:white;">
      <div style="width:60px;height:60px;border:4px solid white;border-top:4px solid transparent;border-radius:50%;margin:0 auto 20px;animation:spin 1s linear infinite;"></div>
      <div>Loading Academic Calculator...</div>
    </div>
  </div>

  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <!-- Header -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">
        <i class="fas fa-graduation-cap"></i>
      </div>
      <h1 id="title-text">Akademik Qiym…ôt Kalkulyatoru</h1>
    </div>
    
    <div class="controls">
      <div class="lang-switch">
        <button class="chip active" data-lang="az">AZ</button>
        <button class="chip" data-lang="en">EN</button>
      </div>
      <label class="switch">
        <input type="checkbox" id="darkToggle">
        <span class="slider"></span>
      </label>
    </div>
  </header>

  <!-- Main Calculator -->
  <main class="container">
    <section class="card main-calc">
      <h2><i class="fas fa-calculator"></i> <span id="calc-title">Qiym…ôt Kalkulyatoru</span></h2>
      
      <div class="input-group">
        <label for="ksq" id="label-ksq">
          <i class="fas fa-tasks"></i> KSQ Qiym…ôtl…ôri (verg√ºll…ô ayƒ±rƒ±n):
        </label>
        <input type="text" id="ksq" placeholder="M…ôs: 85, 90, 78" class="input-field">
      </div>
      
      <div class="input-group">
        <label for="bsq" id="label-bsq">
          <i class="fas fa-file-alt"></i> BSQ Qiym…ôti (…ôg…ôr varsa):
        </label>
        <input type="number" id="bsq" placeholder="M…ôs: 92" class="input-field" min="0" max="100">
      </div>
      
      <div class="input-group">
        <label for="schemeSelect" id="label-scheme">
          <i class="fas fa-globe"></i> Qiym…ôtl…ôndirm…ô Sistemi:
        </label>
        <select id="schemeSelect" class="scheme-select">
          <option value="az">üá¶üáø Az…ôrbaycan (KSQ 40% + BSQ 60%)</option>
          <option value="us">üá∫üá∏ AB≈û GPA (4.0 sistemi)</option>
          <option value="uk">üá¨üáß BK Faiz & Sinif</option>
          <option value="ects">üá™üá∫ ECTS (A‚ÄìF)</option>
          <option value="custom">‚öôÔ∏è √ñz…ôl √ß…ôki</option>
        </select>
      </div>
      
      <!-- Custom Weights -->
      <div id="customWeights" class="weights-container" style="display: none;">
        <div class="weight-slider">
          <label>KSQ √á…ôkisi: <span id="kqsWeightVal">40</span>%</label>
          <input type="range" id="kqsWeight" min="0" max="100" value="40">
        </div>
        <div class="weight-slider">
          <label>BSQ √á…ôkisi: <span id="bsqWeightVal">60</span>%</label>
          <input type="range" id="bsqWeight" min="0" max="100" value="60" disabled>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="btn-calc" class="btn-primary">
          <i class="fas fa-calculator"></i> <span id="calc-btn-text">Hesabla</span>
        </button>
        <button id="btn-save" class="btn-secondary">
          <i class="fas fa-save"></i> Saxla
        </button>
        <button id="btn-clear" class="btn-outline">
          <i class="fas fa-trash"></i> T…ômizl…ô
        </button>
      </div>
      
      <!-- Results -->
      <div class="result-display">
        <div class="result-header">
          <h3><i class="fas fa-poll"></i> <span id="label-result">Yekun Qiym…ôt:</span></h3>
          <div class="result-value" id="result">-</div>
        </div>
        <div class="converted" id="converted"></div>
      </div>
      
      <!-- Tips -->
      <div class="tips" id="tipsBox">
        <i class="fas fa-lightbulb"></i> <span id="tips-text">Qiym…ôtl…ôrinizi daxil edin</span>
      </div>
    </section>
    
    <!-- History Chart -->
    <section class="card">
      <h2><i class="fas fa-chart-line"></i> <span id="history-title">Tarix√ß…ô</span></h2>
      <canvas id="historyChart" height="200"></canvas>
      <div class="action-buttons">
        <button id="btn-pdf" class="btn-secondary">
          <i class="fas fa-file-pdf"></i> PDF
        </button>
        <button id="btn-csv" class="btn-secondary">
          <i class="fas fa-file-csv"></i> CSV
        </button>
        <button id="btn-share" class="btn-outline">
          <i class="fas fa-share"></i> Payla≈ü
        </button>
      </div>
    </section>
    
    <!-- Countdown & Calculator -->
    <div class="row">
      <section class="card">
        <h2><i class="fas fa-clock"></i> <span id="exam-title">Geri Sayƒ±m</span></h2>
        <input type="date" id="examDate" class="input-field">
        <button id="btn-countdown" class="btn-primary">
          <i class="fas fa-play"></i> <span id="countdown-btn">Ba≈ülat</span>
        </button>
        <div class="countdown" id="countdown">-</div>
      </section>
      
      <section class="card">
        <h2><i class="fas fa-calculator"></i> <span id="calc-box-title">Kalkulyator</span></h2>
        <input type="text" id="resultCalc" readonly class="calc-display">
        <div class="calc-buttons">
          <button data-c="C">C</button>
          <button data-c="B"><i class="fas fa-backspace"></i></button>
          <button data-c="%">%</button>
          <button data-c="/">/</button>
          
          <button data-c="7">7</button>
          <button data-c="8">8</button>
          <button data-c="9">9</button>
          <button data-c="*">√ó</button>
          
          <button data-c="4">4</button>
          <button data-c="5">5</button>
          <button data-c="6">6</button>
          <button data-c="-">-</button>
          
          <button data-c="1">1</button>
          <button data-c="2">2</button>
          <button data-c="3">3</button>
          <button data-c="+">+</button>
          
          <button data-c="0" style="grid-column: span 2;">0</button>
          <button data-c=".">.</button>
          <button data-c="=" class="equals">=</button>
        </div>
      </section>
    </div>
  </main>
  
  <footer class="footer">
    <small>¬© <span id="year"></span> Ramin Huseynov ‚Äî Akademik Kalkulyator</small>
  </footer>
  
  <script src="script.js"></script>
</body>
</html>
